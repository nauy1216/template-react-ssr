{"version":3,"sources":["webpack:///./src/components/Header/index.css","webpack:///./src/pages/App.css?c993","webpack:///./src/store/actions/home.js","webpack:///./src/store/action-types.js","webpack:///./src/pages/Home/index.js","webpack:///./src/store/actions/counter.js","webpack:///./src/pages/Counter/index.js","webpack:///./src/store/actions/session.js","webpack:///./src/pages/Login/index.js","webpack:///./src/pages/Logout/index.js","webpack:///./src/pages/Profile/index.js","webpack:///./src/pages/NotFound/index.js","webpack:///./src/withStyles.js","webpack:///./src/components/Header/index.js","webpack:///./src/pages/App.js","webpack:///./src/store/index.js","webpack:///./src/routes.js","webpack:///./src/client/request.js","webpack:///./src/store/reducers/counter.js","webpack:///./src/store/reducers/home.js","webpack:///./src/store/reducers/session.js","webpack:///./src/store/reducers/index.js","webpack:///./src/client/index.js","webpack:///./src/components/Header/index.css?5c33","webpack:///./src/pages/App.css"],"names":["module","exports","push","i","content","options","transform","undefined","locals","getHomeList","dispatch","getState","request","get","then","result","list","data","type","payload","Home","console","log","this","props","length","Helmet","name","className","map","item","key","id","Component","connect","state","home","actions","loadData","store","increment","number","onClick","counter","login","user","post","logout","getUser","Login","username","event","preventDefault","onSubmit","handleSubmit","htmlFor","value","onChange","setState","target","session","Logout","to","NotFound","staticContext","notFound","withStyles","OriginalComponent","styles","cssArr","_getCss","Header","App","app","renderRoutes","route","routes","initState","path","component","exact","Counter","Profile","axios","create","baseURL","success","error","reducers","combineReducers","action","ReactDOM","hydrate","window","context","createStore","applyMiddleware","thunk","withExtraArgument","clientRequest","logger","document","getElementById"],"mappings":"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","file":"client.js","sourcesContent":["exports = module.exports = require(\"../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".user{\\n    color:red;\\n}\", \"\"]);\n\n","\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js!./App.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../node_modules/css-loader/dist/cjs.js!./App.css\", function() {\n\t\tvar newContent = require(\"!!../../node_modules/css-loader/dist/cjs.js!./App.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","import * as types from '../action-types';\n\nexport default {\n    getHomeList() {\n        // 这里使用 redux-thunk 中间件\n        return function (dispatch, getState, request) {\n            // 如果是服务器端请求数据，则直接访问 API 服务器的 4000 端口\n            // 如果是客户端请求数据，则要访问 node 服务器（中间层）的 3000 端口\n            // 让 node 服务器帮我们访问 API 服务器的 4000 端口请求数据\n\n            // 因为这里的 action 都是公共的，客户端/服务端的请求参数可能不一样\n            // 所以需要在这里区分当前环境是客户端还是服务端，但是再每个 action 里都做判断会很麻烦\n            // 所以这里在不同环境下调用时，给函数传递一个 request ，就可以区分当前环境\n            return request.get('/api/users').then(function (result) {\n                let list = result.data;\n                dispatch({\n                    type: types.SET_HOME_LIST,\n                    payload: list\n                });\n            });\n        }\n    }\n}","//加1的动作类型\nexport const INCREMENT = 'INCREMENT';\n\nexport const SET_HOME_LIST = 'SET_HOME_LIST';\n//设置会话信息\nexport const SET_SESSION = 'SET_SESSION';","import React, {Component} from 'react';\nimport {Helmet} from 'react-helmet';\nimport {connect} from 'react-redux';\nimport actions from '../../store/actions/home';\n\nclass Home extends Component {\n\n    componentWillMount() {\n        console.log('Home 组件即将挂载');\n        if (!this.props.list || !this.props.list.length) {\n            this.props.getHomeList();\n        }\n    }\n\n    // componentDidMount 在服务器端是不执行的\n    componentDidMount() {\n        console.log('你看我在服务端执不执行');\n    }\n\n    render() {\n        return (\n            <>\n                <Helmet>\n                    <title>React-SSR</title>\n                    <meta name=\"description\" content=\"首页描述\"/>\n                </Helmet>\n                <div className=\"row\">\n                    <div className=\"col-md-6 col-md-offset-3\">\n                        <ul className=\"list-group\">\n                            {\n                                this.props.list.map(item => (\n                                    <li key={item.id} className=\"list-group-item\">{item.name}</li>\n                                ))\n                            }\n                        </ul>\n                    </div>\n                </div>\n            </>\n        )\n    }\n}\n\nHome = connect(\n    state => state.home,\n    actions\n)(Home);\n// 此方法是用来异步加载数据的方法，用这个方法可以加载数据并且放到仓库中去\nHome.loadData = function (store) {\n    return store.dispatch(actions.getHomeList());\n};\nexport default Home;","import * as types from '../action-types';\nexport default {\n    increment(){\n        return {type:types.INCREMENT}\n    }\n}","import React, {Component} from 'react';\nimport {connect} from 'react-redux';\nimport actions from '../../store/actions/counter';\n\nclass Home extends Component {\n    render() {\n        return (\n            <div>\n                <p>{this.props.number}</p>\n                <button onClick={this.props.increment}>+</button>\n            </div>\n        )\n    }\n}\n\nHome = connect(\n    state => state.counter,\n    actions\n)(Home);\nexport default Home;","import * as types from '../action-types';\nexport default {\n    login(user){\n      return function(dispatch,getState,request){\n        return request.post('/api/login',user).then(function(result){\n           let data  = result.data;//响应体\n           dispatch({\n               type:types.SET_SESSION,\n               payload:data.data\n           });\n        });\n      }\n    },\n    logout(){\n      return function(dispatch,getState,request){\n        return request.get('/api/logout').then(function(result){\n           let data  = result.data;//响应体\n           dispatch({\n               type:types.SET_SESSION,\n               payload:data.data\n           });\n           //退出之后自动跳转到登陆页\n           //dispatch(push('/login'));\n        });\n      }\n    },\n    getUser(){\n      return function(dispatch,getState,request){\n        return request.get('/api/user').then(function(result){\n           let data  = result.data;//响应体\n           dispatch({\n               type:types.SET_SESSION,\n               payload:data.data\n           });\n        });\n      }\n    }\n}","import React, {Component} from 'react';\nimport {connect} from 'react-redux';\nimport actions from '../../store/actions/session';\n\nclass Login extends Component {\n    state = {username: ''};\n    handleSubmit = (event) => {\n        event.preventDefault();\n        this.props.login({username: this.state.username});\n    };\n\n    render() {\n        return (\n            <div className=\"row\">\n                <div className=\"col-md-6 col-md-offset-3\">\n                    <form onSubmit={this.handleSubmit}>\n                        <div className=\"form-group\">\n                            <label htmlFor=\"username\">用户名</label>\n                            <input type=\"text\" className=\"form-control\" value={this.state.username}\n                                   onChange={event => this.setState({username: event.target.value})}/>\n                        </div>\n                        <div className=\"form-group\">\n                            <input type=\"submit\" className=\"btn btn-primary\"/>\n                        </div>\n                    </form>\n                </div>\n            </div>\n        )\n    }\n}\n\nLogin = connect(\n    state => state.session,\n    actions\n)(Login);\nexport default Login;","import React, {Component} from 'react';\nimport {connect} from 'react-redux';\nimport actions from '../../store/actions/session';\n\nclass Logout extends Component {\n    render() {\n        return (\n            <div className=\"row\">\n                <div className=\"col-md-6 col-md-offset-6\">\n                    <button\n                        onClick={this.props.logout}\n                        type=\"submit\" className=\"btn btn-primary\">退出\n                    </button>\n                </div>\n            </div>\n        )\n    }\n}\n\nLogout = connect(\n    state => state.session,\n    actions\n)(Logout);\nexport default Logout;","import React, {Component} from 'react';\nimport {connect} from 'react-redux';\nimport {Redirect} from 'react-router-dom';\n\nclass Login extends Component {\n    render() {\n        return (\n            this.props.user ? <div className=\"row\">\n                <div className=\"col-md-6 col-md-offset-6\">\n                    个人中心\n                </div>\n            </div> : <Redirect to=\"/login\"/>\n        )\n    }\n}\n\nLogin = connect(\n    state => state.session\n)(Login);\nexport default Login;","import React, {Component} from 'react';\n\nclass NotFound extends Component {\n    componentWillMount() {\n        if (this.props.staticContext) {\n            // 给静态路由的上下文添加一个 notFound = true 的键值对\n            this.props.staticContext.notFound = true;\n        }\n    }\n\n    render() {\n        return (\n            <div className=\"row\">\n                <div className=\"col-md-6 col-md-offset-6\">\n                    你的页面飞了\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default NotFound;","import React, {Component} from 'react';\n\n// 服务端返回的 html 源码里，没有 style 标签\n// 而在浏览器中的 html 源码里，有 style 标签，是通过 js 插入进去的\n// 页面初始化的时候是没有样式的，后续通过 js 插入 css 样式，会发生闪烁/抖动\n// 所以希望 css 样式能在服务端返回的时候，就把样式写进去\n\nexport default function withStyles(OriginalComponent, styles) {\n    class ProxyComponent extends Component {\n        componentWillMount() {\n            if (this.props.staticContext) {\n                // isomorphic-style-loader 这个 loader 会处理所有的样式文件\n                // 每个样式文件会有一个 _getCss 属性，可以得到处理后的 css 源代码\n                this.props.staticContext.cssArr.push(styles._getCss());\n            }\n        }\n\n        render() {\n            return <OriginalComponent {...this.props}/>\n        }\n    }\n\n    return ProxyComponent;\n}\n","import React, {Component, Fragment} from 'react';\nimport {Link} from 'react-router-dom';\nimport {connect} from 'react-redux';\nimport styles from './index.css';\nimport withStyles from '../../withStyles';\n\nclass Header extends Component {\n    render() {\n        return (\n            <nav className=\"navbar navbar-inverse navbar-fixed-top\">\n                <div className=\"container-fluid\">\n                    <div className=\"navbar-header\">\n                        <a className=\"navbar-brand\">SSR</a>\n                    </div>\n                    <div>\n                        <ul className=\"nav navbar-nav\">\n                            <li><Link to=\"/\">首页</Link></li>\n                            {this.props.user && <Fragment>\n                                <li><Link to=\"/logout\">退出</Link></li>\n                                <li><Link to=\"/profile\">个人中心</Link></li>\n                            </Fragment>}\n                            {!this.props.user && <li><Link to=\"/login\">登录</Link></li>}\n                        </ul>\n                        {\n                            this.props.user && (\n                                <ul className=\"nav navbar-nav navbar-right\">\n                                    <li><a className={styles.user}>{this.props.user.username}</a></li>\n                                </ul>\n                            )\n                        }\n                    </div>\n                </div>\n            </nav>\n        )\n    }\n}\n\nHeader = connect(\n    state => state.session\n)(Header);\nexport default withStyles(Header, styles);","import React, {Component, Fragment} from 'react';\nimport Header from '../components/Header';\nimport {renderRoutes, matchRoutes} from 'react-router-config';\nimport actions from '../store/actions/session';\nimport styles from './App.css';\nimport withStyles from '../withStyles';\n\nclass App extends Component {\n    render() {\n        return (\n            <Fragment>\n                {/*因为 Header 组件不是通过静态路由渲染出来的，所以需要手动给它传递一个属性值*/}\n                <Header staticContext={this.props.staticContext}/>\n                <div className=\"container\" className={styles.app}>\n                    {renderRoutes(this.props.route.routes)}\n                </div>\n            </Fragment>\n        )\n    }\n}\n\nApp.loadData = function (store) {\n    return store.dispatch(actions.getUser());\n};\nexport default withStyles(App, styles);","import {createStore, applyMiddleware} from 'redux';\nimport thunk from 'redux-thunk';\nimport logger from 'redux-logger';\nimport clientRequest from '../client/request';\nimport createServerRequest from '../server/request';\nimport reducers from './reducers';\n\nexport function getServerStore(req) {\n    // withExtraArgument 用来给 thunk 传递额外的参数\n    return createStore(reducers, applyMiddleware(thunk.withExtraArgument(createServerRequest(req)), logger));\n}\n\nexport function getClientStore() {\n    // 服务端：组件初始化时会请求数据，请求的数据会存到服务端仓库中，然后组件使用数据显示相应内容\n    // 客户端：为了避免组件挂载时又一次的请求数据（当服务器端已经请求过数据并返回了有数据的内容）\n    // 取出服务端存到 window 中的仓库数据并作为初始值存到客户端仓库中\n    // 俗称：数据的注水\n    let initState = window.context.state;\n    return createStore(reducers, initState, applyMiddleware(thunk.withExtraArgument(clientRequest), logger));\n}","import React, {Component, Fragment} from 'react';\nimport {Route} from 'react-router-dom';\nimport Home from './pages/Home';\nimport Counter from './pages/Counter';\nimport Login from './pages/Login';\nimport Logout from './pages/Logout';\nimport Profile from './pages/Profile';\nimport NotFound from './pages/NotFound';\nimport App from './pages/App';\n\n// 集中式路由\nexport default [\n    {\n        path: '/',\n        component: App,\n        loadData: App.loadData,\n        // 子路由\n        routes: [\n            {\n                path: '/',\n                component: Home,\n                exact: true,\n                key: '/',\n                // 加载数据，如果此配置项有了这个属性，那么意味着需要加载异步数据\n                loadData: Home.loadData\n            },\n            {\n                path: '/counter',\n                component: Counter,\n                key: '/counter'\n            },\n            {\n                path: '/login',\n                component: Login,\n                key: '/login'\n            },\n            {\n                path: '/logout',\n                component: Logout,\n                key: '/logout'\n            },\n            {\n                path: '/profile',\n                component: Profile,\n                key: '/profile'\n            },\n            {\n                component: NotFound,\n                key: '/notfound'\n            }\n        ]\n    }\n]\n","import axios from 'axios';\n\n// 如果是服务器端请求数据，则直接访问 API 服务器的 4000 端口\n// 如果是客户端请求数据，则要访问 node 服务器（中间层）的 3000 端口\n// 让 node 服务器帮我们访问 API 服务器的 4000 端口请求数据\n\n// 创建一个 axios 的实例, 配置 baseURL 的基准路径\nexport default axios.create({\n    baseURL: '/'\n});\n","import * as types from '../action-types';\nlet initState = {number:0};\nexport default function(state=initState,action){\n   switch(action.type){\n       case types.INCREMENT:\n         return {number:state.number+1};\n       default:\n         return state;\n   }\n}","import * as types from '../action-types';\n\nlet initState = {list: []};\nexport default function (state = initState, action) {\n    switch (action.type) {\n        case types.SET_HOME_LIST:\n            return {list: action.payload};\n        default:\n            return state;\n    }\n}","import * as types from '../action-types';\nlet initState = {\n  user:null,//当前登陆的用户\n  success:null,//成功的消息\n  error:null//错误消息\n};\nexport default function(state=initState,action){\n   switch(action.type){\n       case types.SET_SESSION:\n         return action.payload;//整体覆盖\n       default:\n         return state;\n   }\n}","import {combineReducers} from 'redux';\nimport counter from './counter';\nimport home from './home';\nimport session from './session';\nlet reducers = combineReducers({\n    counter,\n    home,\n    session\n});\nexport default reducers;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport routes from '../routes';\nimport {BrowserRouter, Route} from 'react-router-dom';\nimport {Provider} from 'react-redux';\nimport {getClientStore} from '../store';\nimport {renderRoutes, matchRoutes} from 'react-router-config';\n\n// hydrate 就是表示把服务器端渲染未完成的工作完成，比如说绑定事件\nReactDOM.hydrate(\n    <Provider store={getClientStore()}>\n        <BrowserRouter>\n            {renderRoutes(routes)}\n        </BrowserRouter>\n    </Provider>\n    , document.getElementById('root'));","\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!./index.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/dist/cjs.js!./index.css\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/dist/cjs.js!./index.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".app{\\n    margin-top:70px;\\n}\", \"\"]);\n\n"],"sourceRoot":""}